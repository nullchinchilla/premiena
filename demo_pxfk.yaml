categories:
  C:
    [
      p,
      t,
      k,
      f,
      s,
      h,
      b,
      d,
      g,
      q,
      x,
      r,
      l,
      w,
      y,
      n,
      m,
      ñ,
      j,
      v,
      š,
      ž,
      č,
      z,
      c,
      "'",
      þ,
      ð,
    ]
  V: [a, e, i, o, u, ē, ō, ë, ī, ū, ï, 1]
  M: [i, u]
  XT: [n, t, d, z, c]
  XPREPAT: [t, k, d, g, l, m, n]
  XPOSTPAT: [q, q, j, j, y, y, y]

  XPREFLAT: [k, g, l, m, n, h]
  XPOSTFLAT: [p, b, w, w, w, f]

  XYER: [i, ë, u]
  # XNONYER: [a, u, ē, ō, o, e]
  # XWEAK: [è, à, ]
  # XSTRONG: [i, a]

rules:
  # some respelling
  - ng > ñ / _
  - zh > ž / _
  - sh > š / _
  - ch > č / _
  - ui > uei / _
  - un > uën / _
  - iñ > iëñ / _
  - ye > yie / _
  - yang > iañ / _
  - mo > muo / _
  - po > puo / _
  - bo > buo / _
  - wo > wë / _

  # remove the problematic RRR sounds
  - i > ë / (š|č|ž|s|z|c)_

  # make /o/ /e/ /ë/ distinction phonemic
  - e > ë / (%|C|')_(%|C|')
  - ai > ē / (%|C|')_
  - ei > e / (%|C|')(M|)_
  - ao > ō / (%|C|')_
  - ou > o / (%|C|')_
  - añ > on / (%|C|')(u|)_
  - ëñ > ën / _
  - oñ > un / _

  # remove the <w> medial
  - uan > en / (j|q|x|y)_
  - u > ui / (j|q|x|y)_(%|C|')
  - ü > ui / _
  - XPREFLATu > XPOSTFLAT / _V
  - u >  / _V

  # remove the <i> medial in various ways
  - iañ > an / _(%|C|')
  - ian > en / _(%|C|')
  - iao > ō / _
  - ing > en / _
  - ie > e / _
  - ia > ē / (%|C|')_(%|C|')
  - iu > io / _
  - XPREPAT > XPOSTPAT / _(iV)
  - š > x / _
  - ž > j / _
  - č > q / _
  - i > / (%|C|')_V

  # foot-based syncope
  - XYER > 1 / %(C*VC*V)*(C*VC*)_
  - XYER > 1 / V(C*)_%
  - 1 > / _
  - ë > a / _
  - y > i / C_(C|%)
  - y > / _i
  - n > un / C_(C|%)

  # # get rid of the stupid <r> sound
  - r > y / _

  # great consonant shift:
  # - j becomes r
  # - then, j > z and q > c, pushing z to ð and c to þ. there is no more postalveolars.
  - j > r / _
  - z > ð / _
  - c > þ / _
  - ð > d / %_
  - j > z / _
  - q > c / _

  # remove c
  - c > ts / V_V
  - c > s / _

  # assimilation
  - (n|l) > r / _r
  - ds > z / _
  - dz > z / _

  # # h-dropping and x-backing
  # - h > / _
  # - x > h / _

  # # some vowel shifting and spelling
  # - ē > æ / _
  # - ō > o / _
